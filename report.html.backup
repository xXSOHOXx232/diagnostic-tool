<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯Šæ–­æŠ¥å‘Š - ç”µå•†è¿è¥å¥åº·åº¦è¯Šæ–­å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- æŠ¥å‘Šå¤´éƒ¨ -->
    <div class="gradient-bg py-16 px-4">
        <div class="max-w-4xl mx-auto text-center text-white">
            <div class="fade-in">
                <h1 class="text-4xl font-bold mb-4">ğŸ‰ è¯Šæ–­å®Œæˆï¼</h1>
                <p class="text-xl mb-8">ä½ çš„ç”µå•†è¿è¥å¥åº·åº¦</p>
                
                <!-- å¥åº·åº¦è¯„åˆ† -->
                <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 mb-6">
                    <div id="levelStars" class="text-5xl mb-4">â­â­â­â­â˜†</div>
                    <div id="levelText" class="text-3xl font-bold mb-2">è‰¯å¥½</div>
                    <div id="totalScore" class="text-6xl font-bold mb-4">76 åˆ†</div>
                    <div id="percentileText" class="text-lg opacity-90">
                        è¶…è¿‡ <span id="percentile">68</span>% çš„åŒè¡Œä¼ä¸š
                    </div>
                </div>
                
                <!-- æ“ä½œæŒ‰é’® -->
                <div class="flex flex-wrap justify-center gap-4 no-print">
                    <button onclick="downloadPDF()" class="bg-white text-purple-600 px-6 py-3 rounded-full font-bold hover:scale-105 transition">
                        ğŸ“¥ ä¸‹è½½PDFæŠ¥å‘Š
                    </button>
                    <button onclick="shareReport()" class="bg-white/20 text-white px-6 py-3 rounded-full font-bold hover:bg-white/30 transition">
                        ğŸ”— åˆ†äº«ç»™å¥½å‹
                    </button>
                    <button onclick="location.href='diagnostic.html'" class="bg-white/20 text-white px-6 py-3 rounded-full font-bold hover:bg-white/30 transition">
                        ğŸ”„ å†æµ‹ä¸€æ¬¡
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- æŠ¥å‘Šå†…å®¹ -->
    <div id="reportContent" class="max-w-4xl mx-auto px-4 py-12">
        <!-- å¥åº·åº¦é›·è¾¾å›¾ -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“Š å¥åº·åº¦é›·è¾¾å›¾</h2>
            <div class="relative" style="height: 400px;">
                <canvas id="radarChart"></canvas>
            </div>
        </div>

        <!-- å„ç»´åº¦å¾—åˆ† -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“ˆ å„ç»´åº¦å¾—åˆ†</h2>
            <div id="dimensionScores" class="space-y-4">
                <!-- é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- æ ¸å¿ƒé—®é¢˜æ¸…å• -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">âš ï¸ æ ¸å¿ƒé—®é¢˜æ¸…å•</h2>
            <div id="problemsList">
                <!-- é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- æ”¹è¿›å»ºè®® -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ’¡ æ”¹è¿›å»ºè®®ï¼ˆTop 3ï¼‰</h2>
            <div id="suggestionsList" class="space-y-6">
                <!-- é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- è¡Œä¸šå¯¹æ ‡ -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“Š è¡Œä¸šå¯¹æ ‡</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="text-center p-6 bg-purple-50 rounded-xl">
                    <div class="text-sm text-gray-600 mb-2">ä½ çš„å¾—åˆ†</div>
                    <div id="yourScore" class="text-3xl font-bold text-purple-600">76åˆ†</div>
                    <div class="text-sm text-gray-600 mt-2">è‰¯å¥½</div>
                </div>
                <div class="text-center p-6 bg-gray-50 rounded-xl">
                    <div class="text-sm text-gray-600 mb-2">è¡Œä¸šå¹³å‡</div>
                    <div class="text-3xl font-bold text-gray-600">68åˆ†</div>
                    <div class="text-sm text-gray-600 mt-2">ä¸€èˆ¬</div>
                </div>
                <div class="text-center p-6 bg-green-50 rounded-xl">
                    <div class="text-sm text-gray-600 mb-2">ä¼˜ç§€ä¼ä¸š</div>
                    <div class="text-3xl font-bold text-green-600">85åˆ†+</div>
                    <div class="text-sm text-gray-600 mt-2">ä¼˜ç§€</div>
                </div>
            </div>
            <div class="mt-6 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl">
                <p class="text-center text-gray-700">
                    ğŸ‰ ä½ è¶…è¿‡äº† <span id="percentile2" class="font-bold text-purple-600">68%</span> çš„åŒè¡Œä¼ä¸šï¼<br>
                    è·ç¦»ä¼˜ç§€ä¼ä¸šè¿˜å·® <span id="gapToExcellent" class="font-bold text-orange-600">9</span> åˆ†
                </p>
            </div>
        </div>

        <!-- ä¸‹ä¸€æ­¥è¡ŒåŠ¨ -->
        <div class="bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg p-8 text-white mb-8 fade-in no-print">
            <h2 class="text-2xl font-bold mb-6">ğŸš€ æƒ³è¦æ›´è¯¦ç»†çš„æ”¹è¿›æ–¹æ¡ˆï¼Ÿ</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-3">æ·±åº¦è¯Šæ–­æŠ¥å‘Š</h3>
                    <div class="text-3xl font-bold mb-4">Â¥299</div>
                    <ul class="space-y-2 mb-6 text-sm">
                        <li>âœ“ 30é¡µä¸“ä¸šæŠ¥å‘Š</li>
                        <li>âœ“ è¯¦ç»†æ”¹è¿›è·¯çº¿å›¾</li>
                        <li>âœ“ 1æ¬¡30åˆ†é’Ÿä¸“å®¶å’¨è¯¢</li>
                    </ul>
                    <button class="w-full bg-white text-purple-600 py-3 rounded-lg font-bold hover:scale-105 transition">
                        ç«‹å³è´­ä¹°
                    </button>
                </div>
                
                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-3">SOPçŸ¥è¯†åº“</h3>
                    <div class="text-3xl font-bold mb-4">Â¥999/å¹´</div>
                    <ul class="space-y-2 mb-6 text-sm">
                        <li>âœ“ 42+ä»½è¿è¥SOPæ–‡æ¡£</li>
                        <li>âœ“ 5å¤§æ•°æ®å·¥å…·æ¨¡æ¿</li>
                        <li>âœ“ æŒç»­æ›´æ–°</li>
                    </ul>
                    <button class="w-full bg-white text-purple-600 py-3 rounded-lg font-bold hover:scale-105 transition">
                        ç«‹å³è®¢é˜…
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-gray-900 text-white py-8 px-4 no-print">
        <div class="max-w-4xl mx-auto text-center">
            <p class="mb-4">Â© 2026 åƒå±±ç”µå•†è¿è¥å·¥ä½œå®¤. All rights reserved.</p>
            <p class="text-gray-400 text-sm">
                å¾®ä¿¡ï¼šxXHao_YuanXx | ç”µè¯ï¼š18052570966 | é‚®ç®±ï¼šqhy123sw@outlook.com
            </p>
        </div>
    </footer>

    <script>
        // ä»localStorageåŠ è½½è¯Šæ–­ç»“æœ
        const result = JSON.parse(localStorage.getItem('diagnosticResult'));
        
        if (!result) {
            alert('æœªæ‰¾åˆ°è¯Šæ–­ç»“æœï¼Œè¯·å…ˆå®Œæˆè¯Šæ–­');
            window.location.href = 'diagnostic.html';
        }

        // æ¸²æŸ“æŠ¥å‘Š
        function renderReport() {
            // æ¸²æŸ“å¤´éƒ¨ä¿¡æ¯
            renderHeader();
            
            // æ¸²æŸ“é›·è¾¾å›¾
            renderRadarChart();
            
            // æ¸²æŸ“ç»´åº¦å¾—åˆ†
            renderDimensionScores();
            
            // æ¸²æŸ“é—®é¢˜æ¸…å•
            renderProblems();
            
            // æ¸²æŸ“æ”¹è¿›å»ºè®®
            renderSuggestions();
            
            // æ¸²æŸ“è¡Œä¸šå¯¹æ ‡
            renderBenchmark();
        }

        // æ¸²æŸ“å¤´éƒ¨ä¿¡æ¯
        function renderHeader() {
            const stars = 'â­'.repeat(result.levelStars) + 'â˜†'.repeat(5 - result.levelStars);
            document.getElementById('levelStars').textContent = stars;
            document.getElementById('levelText').textContent = result.level;
            document.getElementById('totalScore').textContent = result.totalScore + ' åˆ†';
            document.getElementById('percentile').textContent = result.percentile;
        }

        // æ¸²æŸ“é›·è¾¾å›¾
        function renderRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            const labels = result.dimensionScores.map(d => d.dimension);
            const data = result.dimensionScores.map(d => d.score);
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ä½ çš„å¾—åˆ†',
                        data: data,
                        fill: true,
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: 'rgb(102, 126, 234)',
                        pointBackgroundColor: 'rgb(102, 126, 234)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(102, 126, 234)'
                    }, {
                        label: 'è¡Œä¸šå¹³å‡',
                        data: [3.8, 3.6, 3.4, 3.7, 4.0, 3.9, 3.5, 3.3],
                        fill: true,
                        backgroundColor: 'rgba(156, 163, 175, 0.2)',
                        borderColor: 'rgb(156, 163, 175)',
                        pointBackgroundColor: 'rgb(156, 163, 175)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(156, 163, 175)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 5,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        // æ¸²æŸ“ç»´åº¦å¾—åˆ†
        function renderDimensionScores() {
            const container = document.getElementById('dimensionScores');
            container.innerHTML = '';
            
            result.dimensionScores.forEach(dimension => {
                const percentage = (dimension.score / dimension.maxScore) * 100;
                const color = percentage >= 80 ? 'bg-green-500' : percentage >= 60 ? 'bg-yellow-500' : 'bg-red-500';
                
                const scoreItem = document.createElement('div');
                scoreItem.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <span class="font-medium text-gray-700">${dimension.dimension}</span>
                        <span class="font-bold text-gray-900">${dimension.score}åˆ†</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="${color} h-3 rounded-full transition-all duration-500" style="width: ${percentage}%"></div>
                    </div>
                `;
                container.appendChild(scoreItem);
            });
        }

        // æ¸²æŸ“é—®é¢˜æ¸…å•
        function renderProblems() {
            const container = document.getElementById('problemsList');
            
            if (result.problems.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <div class="text-5xl mb-4">ğŸ‰</div>
                        <p class="text-lg">å¤ªæ£’äº†ï¼æ²¡æœ‰å‘ç°ä¸¥é‡é—®é¢˜</p>
                    </div>
                `;
                return;
            }
            
            const highProblems = result.problems.filter(p => p.severity === 'high');
            const mediumProblems = result.problems.filter(p => p.severity === 'medium');
            
            let html = '';
            
            if (highProblems.length > 0) {
                html += `
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-red-600 mb-3">ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆéœ€ç«‹å³æ”¹è¿›ï¼‰</h3>
                        <div class="space-y-3">
                            ${highProblems.map(p => `
                                <div class="border-l-4 border-red-500 bg-red-50 p-4 rounded">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">${p.question}</p>
                                            <p class="text-sm text-gray-600 mt-1">${p.suggestion}</p>
                                        </div>
                                        <span class="ml-4 px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-bold">${p.score}åˆ†</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            if (mediumProblems.length > 0) {
                html += `
                    <div>
                        <h3 class="text-lg font-bold text-yellow-600 mb-3">ğŸŸ¡ ä¸€èˆ¬é—®é¢˜ï¼ˆå»ºè®®ä¼˜åŒ–ï¼‰</h3>
                        <div class="space-y-3">
                            ${mediumProblems.map(p => `
                                <div class="border-l-4 border-yellow-500 bg-yellow-50 p-4 rounded">
                                    <div class="flex items-start justify-between">
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-900">${p.question}</p>
                                            <p class="text-sm text-gray-600 mt-1">${p.suggestion}</p>
                                        </div>
                                        <span class="ml-4 px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-bold">${p.score}åˆ†</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }

        // æ¸²æŸ“æ”¹è¿›å»ºè®®
        function renderSuggestions() {
            const container = document.getElementById('suggestionsList');
            container.innerHTML = '';
            
            result.suggestions.forEach(suggestion => {
                const suggestionCard = document.createElement('div');
                suggestionCard.className = 'border-l-4 border-purple-500 bg-purple-50 p-6 rounded-xl';
                suggestionCard.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-10 h-10 rounded-full gradient-bg text-white flex items-center justify-center font-bold text-lg mr-4">
                            ${suggestion.priority}
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold text-gray-900 mb-2">${suggestion.title}</h3>
                            <p class="text-gray-700 mb-3">${suggestion.description}</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                <div class="bg-white p-3 rounded-lg">
                                    <span class="text-gray-600">é¢„æœŸæ•ˆæœï¼š</span>
                                    <span class="font-medium text-green-600">${suggestion.expectedEffect}</span>
                                </div>
                                <div class="bg-white p-3 rounded-lg">
                                    <span class="text-gray-600">å®æ–½å‘¨æœŸï¼š</span>
                                    <span class="font-medium text-blue-600">${suggestion.timeline}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(suggestionCard);
            });
        }

        // æ¸²æŸ“è¡Œä¸šå¯¹æ ‡
        function renderBenchmark() {
            document.getElementById('yourScore').textContent = result.totalScore + 'åˆ†';
            document.getElementById('percentile2').textContent = result.percentile + '%';
            document.getElementById('gapToExcellent').textContent = (85 - result.totalScore);
        }

        // ä¸‹è½½PDF
        async function downloadPDF() {
            alert('PDFä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼\n\næç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„æ‰“å°åŠŸèƒ½ï¼ˆCtrl+P / Cmd+Pï¼‰ä¿å­˜ä¸ºPDFã€‚');
        }

        // åˆ†äº«æŠ¥å‘Š
        function shareReport() {
            const shareText = `æˆ‘åˆšå®Œæˆäº†ç”µå•†è¿è¥å¥åº·åº¦è¯Šæ–­ï¼Œå¾—åˆ†${result.totalScore}åˆ†ï¼ˆ${result.level}ï¼‰ï¼Œè¶…è¿‡äº†${result.percentile}%çš„åŒè¡Œä¼ä¸šï¼ä½ ä¹Ÿæ¥æµ‹æµ‹å§ï¼`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ç”µå•†è¿è¥å¥åº·åº¦è¯Šæ–­æŠ¥å‘Š',
                    text: shareText,
                    url: window.location.origin
                }).catch(err => console.log('åˆ†äº«å¤±è´¥', err));
            } else {
                // å¤åˆ¶åˆ°å‰ªè´´æ¿
                navigator.clipboard.writeText(shareText + '\n\n' + window.location.origin).then(() => {
                    alert('åˆ†äº«æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                });
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ¸²æŸ“æŠ¥å‘Š
        window.addEventListener('load', () => {
            renderReport();
        });
    </script>
</body>
</html>